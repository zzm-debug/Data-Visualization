{"version":3,"sources":["heatmap-2D.js"],"names":["init2DHeatmap","container","document","getElementById","console","error","containerId","id","d3","select","concat","selectAll","remove","csvData","data","csvParse","trim","genres","months","map","d","heatmapData","flatMap","row","genre","month","value","heatmapContainer","containerWidth","clientWidth","containerHeight","clientHeight","margin","top","Math","max","right","bottom","left","width","height","root","append","attr","svg","x","scaleBand","range","domain","padding","y","css","getComputedStyle","documentElement","axisColor","getPropertyValue","gridColor","xAxis","call","axisBottom","tickSizeOuter","length","style","yAxis","axisLeft","vMin","min","vMax","morandiCoolWarm","interpolateRgbBasis","colorScale","scaleSequential","interpolator","tooltip","enter","bandwidth","on","event","html","pageX","pageY","defs","glow","feMerge","genreCenter","line","curve","curveMonotoneX","lineData1","lineData2","linePoints1","i","top_genre","count","linePoints2","theme","ink","lineA","lineB","dotFill","drawTrend","points","color","cls","datum","log","window","waitForContainer","offsetWidth","offsetHeight","display","setTimeout","readyState","addEventListener"],"mappings":"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","file":"heatmap-2D.11b7100b.js","sourceRoot":"..\\src","sourcesContent":["// heatmap-2D.js - 2Dçƒ­åŠ›å›¾\n// âœ… Inline CSV data (for heatmap)\n(() => {\n  // ç­‰å¾…DOMåŠ è½½å®Œæˆ\n  const init2DHeatmap = () => {\n    // ä½¿ç”¨ heatmap-2d å®¹å™¨\n    const container = document.getElementById(\"heatmap-2d\") || document.getElementById(\"heatmap\");\n    if (!container) {\n      console.error('âŒ æ‰¾ä¸åˆ°heatmapå®¹å™¨');\n      return;\n    }\n    \n    // ä½¿ç”¨å®¹å™¨çš„IDè¿›è¡Œé€‰æ‹©\n    const containerId = container.id;\n    d3.select(`#${containerId}`).selectAll(\"*\").remove();\n    d3.select(\"body\").selectAll(\".heatmap-tooltip\").remove();\n\n    const csvData = `month,classical,electronic,folk,jazz,pop,rock,ACG,rap\n2023-12,35,34,64,47,24,32,37,37\n2024-01,35,33,58,46,23,31,32,36\n2024-02,34,32,62,48,26,33,34,39\n2024-03,35,34,59,48,23,34,37,38\n2024-04,31,34,55,47,21,34,31,36\n2024-05,32,48,57,46,24,34,32,38\n2024-06,32,49,62,48,23,36,31,40\n2024-07,31,38,64,49,25,32,31,38\n2024-08,30,39,62,46,23,32,32,37\n2024-09,32,35,60,45,23,36,33,45\n2024-10,31,32,60,49,23,33,31,46\n2024-11,35,33,58,45,22,32,32,39\n2024-12,35,35,63,48,23,33,37,39\n2025-01,32,34,54,47,22,32,32,38\n2025-02,33,33,58,48,22,31,29,42\n2025-03,33,32,56,48,22,31,31,36\n2025-04,31,33,59,45,22,31,30,36\n2025-05,30,37,58,46,23,32,30,39\n2025-06,29,33,57,46,21,32,31,36\n2025-07,29,36,60,48,21,39,31,38\n2025-08,31,35,59,46,22,34,31,34\n2025-09,30,32,61,46,22,33,30,32\n2025-10,33,33,59,44,21,34,31,36\n2025-11,31,32,57,46,21,33,30,33\n2025-12,33,32,60,45,23,32,33,39\n`;\n\n  const data = d3.csvParse(csvData.trim());\n\n  // âœ… Genre keysï¼ˆä¸Žä½ åŽŸé€»è¾‘ä¸€è‡´ï¼‰\n  const genres = [\"ACG\", \"classical\", \"electronic\", \"folk\", \"jazz\", \"pop\", \"rap\", \"rock\"];\n  const months = data.map(d => d[\"month\"]);\n\n  const heatmapData = data.flatMap(row =>\n    genres.map(genre => ({\n      month: row[\"month\"],\n      genre,\n      value: +row[genre]\n    }))\n  );\n\n  // === è‡ªé€‚åº”å°ºå¯¸è®¡ç®— ===\n  // ä½¿ç”¨ä¸Žä¸Šé¢ç›¸åŒçš„å®¹å™¨\n  const heatmapContainer = container;\n  const containerWidth = heatmapContainer.clientWidth || 900;\n  const containerHeight = heatmapContainer.clientHeight || 320;\n\n  const margin = {\n    top: Math.max(22, containerHeight * 0.10),\n    right: Math.max(18, containerWidth * 0.03),\n    bottom: Math.max(46, containerHeight * 0.18),\n    left: Math.max(64, containerWidth * 0.10)\n  };\n\n  const width = containerWidth - margin.left - margin.right;\n  const height = containerHeight - margin.top - margin.bottom;\n\n  const root = d3.select(`#${containerId}`)\n    .append(\"svg\")\n    .attr(\"width\", \"100%\")\n    .attr(\"height\", \"100%\")\n    .attr(\"viewBox\", `0 0 ${containerWidth} ${containerHeight}`)\n    .attr(\"preserveAspectRatio\", \"xMidYMid meet\");\n\n  // âœ… èƒŒæ™¯â€œå¡ç‰‡å†…è¡¬â€ï¼ˆæ·±è‰²èµ›åšä¸»é¢˜ä¸‹ä¿æŒå…‹åˆ¶ï¼Œä¸æŠ¢è‰²å—ï¼‰\n  root.append(\"rect\")\n    .attr(\"x\", 10)\n    .attr(\"y\", 10)\n    .attr(\"width\", containerWidth - 20)\n    .attr(\"height\", containerHeight - 20)\n    .attr(\"rx\", 14)\n    .attr(\"ry\", 14)\n    .attr(\"fill\", \"rgba(7, 3, 18, 0.18)\")\n    .attr(\"stroke\", \"rgba(50, 167, 255, 0.16)\");\n\n  const svg = root.append(\"g\")\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n  // === Axes ===\n  const x = d3.scaleBand().range([0, width]).domain(months).padding(0.08);\n  const y = d3.scaleBand().range([height, 0]).domain(genres).padding(0.10);\n\n  const css = getComputedStyle(document.documentElement);\n  const axisColor = (css.getPropertyValue(\"--axis-text-strong\") || \"\").trim() || \"rgba(226, 232, 240, 0.88)\";\n  const gridColor = (css.getPropertyValue(\"--axis-grid\") || \"\").trim() || \"rgba(50, 167, 255, 0.12)\";\n\n  const xAxis = svg.append(\"g\")\n    .attr(\"transform\", `translate(0, ${height})`)\n    .call(d3.axisBottom(x).tickSizeOuter(0));\n\n  if (months.length > 12 || containerWidth < 560) {\n    xAxis.selectAll(\"text\")\n      .attr(\"transform\", \"rotate(-45)\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dx\", \"-0.45em\")\n      .attr(\"dy\", \"0.55em\");\n  }\n\n  xAxis.selectAll(\"path, line\").attr(\"stroke\", \"rgba(50, 167, 255, 0.26)\");\n  xAxis.selectAll(\"text\")\n    .attr(\"fill\", axisColor)\n    .style(\"font-size\", \"12px\")\n    .style(\"paint-order\", \"stroke\")\n    .style(\"stroke\", \"rgba(7, 3, 18, 0.72)\")\n    .style(\"stroke-width\", \"2.0px\")\n    .style(\"stroke-linejoin\", \"round\");\n\n  const yAxis = svg.append(\"g\")\n    .call(d3.axisLeft(y).tickSizeOuter(0));\n\n  yAxis.selectAll(\"path, line\").attr(\"stroke\", \"rgba(50, 167, 255, 0.26)\");\n  yAxis.selectAll(\"text\")\n    .attr(\"fill\", axisColor)\n    .style(\"font-size\", \"12px\")\n    .style(\"paint-order\", \"stroke\")\n    .style(\"stroke\", \"rgba(7, 3, 18, 0.72)\")\n    .style(\"stroke-width\", \"2.0px\")\n    .style(\"stroke-linejoin\", \"round\");\n\n  // === âœ… é¢œè‰²ï¼šå‚è€ƒä½ å›¾äºŒï¼ˆè“ç° â†” å¥¶æ²¹ â†” è±†æ²™ç²‰ï¼‰ï¼Œæ›´æ´»æ³¼ä½†ä¸åˆºçœ¼ ===\n  const vMin = d3.min(heatmapData, d => d.value);\n  const vMax = d3.max(heatmapData, d => d.value);\n\n  // â€œMorandi cool-warmâ€ è‡ªå®šä¹‰æ’å€¼\n  const morandiCoolWarm = d3.interpolateRgbBasis([\n    \"#6E86A6\", // è“ç°\n    \"#C9D6E5\", // æµ…é›¾è“\n    \"#F7F4EC\", // å¥¶æ²¹\n    \"#F1C5B7\", // æµ…è±†æ²™\n    \"#C97A6E\"  // æ·±è±†æ²™\n  ]);\n\n  const colorScale = d3.scaleSequential()\n    .domain([vMin, vMax])\n    .interpolator(morandiCoolWarm);\n\n  // === Tooltip ===\n  const tooltip = d3.select(\"body\").append(\"div\")\n    .attr(\"class\", \"heatmap-tooltip\")\n    .style(\"position\", \"absolute\")\n    .style(\"pointer-events\", \"none\")\n    .style(\"opacity\", 0)\n    .style(\"padding\", \"10px 12px\")\n    .style(\"border-radius\", \"12px\")\n    .style(\"background\", \"rgba(30,41,59,0.92)\")\n    .style(\"color\", \"#fff\")\n    .style(\"font\", '13px/1.35 system-ui,-apple-system,\"Segoe UI\",\"Microsoft YaHei\",sans-serif')\n    .style(\"box-shadow\", \"0 10px 24px rgba(0,0,0,0.16)\");\n\n  // === Heatmap cells ===\n  svg.selectAll(\"rect.cell\")\n    .data(heatmapData)\n    .enter()\n    .append(\"rect\")\n    .attr(\"class\", \"cell\")\n    .attr(\"x\", d => x(d.month))\n    .attr(\"y\", d => y(d.genre))\n    .attr(\"width\", x.bandwidth())\n    .attr(\"height\", y.bandwidth())\n    .attr(\"rx\", 8)\n    .attr(\"ry\", 8)\n    .attr(\"fill\", d => colorScale(d.value))\n    .attr(\"stroke\", gridColor)\n    .attr(\"stroke-width\", 1)\n    .on(\"mousemove\", (event, d) => {\n      tooltip\n        .style(\"opacity\", 1)\n        .html(`<b>${d.genre}</b><br/>${d.month}<br/>Value: ${d.value}`)\n        .style(\"left\", `${event.pageX + 12}px`)\n        .style(\"top\", `${event.pageY - 18}px`);\n    })\n    .on(\"mouseout\", () => tooltip.style(\"opacity\", 0));\n\n  // === âœ… æŠ˜çº¿æ›´æŸ”å’Œï¼šé¢œè‰²ç»Ÿä¸€ã€çº¿æ›´ç»†ã€è½»å¾®å…‰æ™•ï¼Œç‚¹ç”¨â€œç©ºå¿ƒæè¾¹â€é¿å…ç™½ç‚¹çªå…€ ===\n  // Glow filter\n  const defs = root.append(\"defs\");\n  const glow = defs.append(\"filter\").attr(\"id\", \"heatmapGlow\");\n  glow.append(\"feGaussianBlur\").attr(\"stdDeviation\", \"1.8\").attr(\"result\", \"coloredBlur\");\n  const feMerge = glow.append(\"feMerge\");\n  feMerge.append(\"feMergeNode\").attr(\"in\", \"coloredBlur\");\n  feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\");\n\n  const genreCenter = d => y(d.genre) + y.bandwidth() / 2;\n\n  const line = d3.line()\n    .x(d => x(d.month) + x.bandwidth() / 2)\n    .y(d => genreCenter(d))\n    .curve(d3.curveMonotoneX);\n\n  // æ•°æ®ä¿æŒä½ çš„åŽŸå§‹é€»è¾‘ï¼ˆåªæ˜¯æ¢é¢œè‰²/æ ·å¼ï¼‰\n  const lineData1 = [\n    {\"part\": 1, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 2, \"top_genre\": \"pop\", \"count\": 8},\n    {\"part\": 3, \"top_genre\": \"pop\", \"count\": 7},\n    {\"part\": 4, \"top_genre\": \"pop\", \"count\": 8},\n    {\"part\": 5, \"top_genre\": \"pop\", \"count\": 8},\n    {\"part\": 6, \"top_genre\": \"pop\", \"count\": 8},\n    {\"part\": 7, \"top_genre\": \"pop\", \"count\": 8},\n    {\"part\": 8, \"top_genre\": \"pop\", \"count\": 8},\n    {\"part\": 9, \"top_genre\": \"pop\", \"count\": 8},\n    {\"part\": 10, \"top_genre\": \"pop\", \"count\": 7},\n    {\"part\": 11, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 12, \"top_genre\": \"pop\", \"count\": 5},\n    {\"part\": 13, \"top_genre\": \"pop\", \"count\": 7},\n    {\"part\": 14, \"top_genre\": \"pop\", \"count\": 7},\n    {\"part\": 15, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 16, \"top_genre\": \"pop\", \"count\": 7},\n    {\"part\": 17, \"top_genre\": \"pop\", \"count\": 5},\n    {\"part\": 18, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 19, \"top_genre\": \"pop\", \"count\": 8},\n    {\"part\": 20, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 21, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 22, \"top_genre\": \"pop\", \"count\": 7},\n    {\"part\": 23, \"top_genre\": \"pop\", \"count\": 5},\n    {\"part\": 24, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 25, \"top_genre\": \"pop\", \"count\": 6}\n  ];\n\n  const lineData2 = [\n    {\"part\": 1, \"top_genre\": \"rap\", \"count\": 5},\n    {\"part\": 2, \"top_genre\": \"rap\", \"count\": 6},\n    {\"part\": 3, \"top_genre\": \"rap\", \"count\": 7},\n    {\"part\": 4, \"top_genre\": \"rap\", \"count\": 6},\n    {\"part\": 5, \"top_genre\": \"rap\", \"count\": 7},\n    {\"part\": 6, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 7, \"top_genre\": \"pop\", \"count\": 8},\n    {\"part\": 8, \"top_genre\": \"pop\", \"count\": 7},\n    {\"part\": 9, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 10, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 11, \"top_genre\": \"pop\", \"count\": 5},\n    {\"part\": 12, \"top_genre\": \"pop\", \"count\": 5},\n    {\"part\": 13, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 14, \"top_genre\": \"pop\", \"count\": 7},\n    {\"part\": 15, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 16, \"top_genre\": \"pop\", \"count\": 7},\n    {\"part\": 17, \"top_genre\": \"pop\", \"count\": 5},\n    {\"part\": 18, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 19, \"top_genre\": \"pop\", \"count\": 7},\n    {\"part\": 20, \"top_genre\": \"pop\", \"count\": 7},\n    {\"part\": 21, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 22, \"top_genre\": \"pop\", \"count\": 7},\n    {\"part\": 23, \"top_genre\": \"pop\", \"count\": 6},\n    {\"part\": 24, \"top_genre\": \"pop\", \"count\": 5},\n    {\"part\": 25, \"top_genre\": \"pop\", \"count\": 5}\n  ];\n\n  const linePoints1 = lineData1.map((d, i) => ({ month: months[i], genre: d.top_genre, count: +d.count }));\n  const linePoints2 = lineData2.map((d, i) => ({ month: months[i], genre: d.top_genre, count: +d.count }));\n\n  const theme = {\n    ink: \"rgba(36,52,71,0.70)\",\n    // å‚è€ƒå›¾äºŒï¼šè“ç° + è±†æ²™ï¼ˆæ›´ç»Ÿä¸€ï¼‰\n    lineA: \"#5B7AA6\",\n    lineB: \"#C97A6E\",\n    dotFill: \"#F7F4EC\"\n  };\n\n  function drawTrend(points, color, cls) {\n    svg.append(\"path\")\n      .datum(points)\n      .attr(\"class\", cls)\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", color)\n      .attr(\"stroke-width\", 2.2)\n      .attr(\"stroke-linejoin\", \"round\")\n      .attr(\"stroke-linecap\", \"round\")\n      .attr(\"opacity\", 0.95)\n      .attr(\"filter\", \"url(#heatmapGlow)\")\n      .attr(\"d\", line);\n\n    svg.selectAll(`circle.${cls}-pt`)\n      .data(points)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", `${cls}-pt`)\n      .attr(\"cx\", d => x(d.month) + x.bandwidth() / 2)\n      .attr(\"cy\", d => genreCenter(d))\n      .attr(\"r\", d => 3.2 + d.count / 6)   // æ›´å…‹åˆ¶\n      .attr(\"fill\", theme.dotFill)         // ç©ºå¿ƒæ•ˆæžœæ›´å¹²å‡€\n      .attr(\"stroke\", color)\n      .attr(\"stroke-width\", 2)\n      .attr(\"opacity\", 0.95)\n      .on(\"mousemove\", (event, d) => {\n        tooltip\n          .style(\"opacity\", 1)\n          .html(`ðŸŽµ Genre: <b>${d.genre}</b><br/>${d.month}<br/>Count: ${d.count}`)\n          .style(\"left\", `${event.pageX + 12}px`)\n          .style(\"top\", `${event.pageY - 18}px`);\n      })\n      .on(\"mouseout\", () => tooltip.style(\"opacity\", 0));\n  }\n\n    drawTrend(linePoints1, theme.lineA, \"trendA\");\n    drawTrend(linePoints2, theme.lineB, \"trendB\");\n\n    console.log(\"âœ… 2D Heatmap rendered (Morandi cool-warm + softer trends)\");\n  };\n  \n  // å¯¼å‡ºåˆå§‹åŒ–å‡½æ•°ï¼Œå…è®¸å¤–éƒ¨è°ƒç”¨\n  window.init2DHeatmap = init2DHeatmap;\n  \n  // ç­‰å¾…å®¹å™¨æœ‰å°ºå¯¸åŽå†æ‰§è¡Œ\n  // ç®€åŒ–ï¼šå¦‚æžœå®¹å™¨è¢«éšè—ï¼Œä½¿ç”¨é»˜è®¤å°ºå¯¸ç»§ç»­\n  const waitForContainer = () => {\n    const container = document.getElementById(\"heatmap-2d\") || document.getElementById(\"heatmap\");\n    if (!container) {\n      console.error('âŒ æ‰¾ä¸åˆ°heatmapå®¹å™¨');\n      return;\n    }\n    \n    const width = container.offsetWidth || container.clientWidth;\n    const height = container.offsetHeight || container.clientHeight;\n    \n    // å¦‚æžœå®¹å™¨æœ‰å°ºå¯¸ï¼Œæˆ–è€…å®¹å™¨è¢«éšè—ï¼ˆä½¿ç”¨é»˜è®¤å°ºå¯¸ï¼‰\n    if (width > 0 && height > 0) {\n      init2DHeatmap();\n    } else if (container.style.display === 'none') {\n      // å¦‚æžœå®¹å™¨è¢«éšè—ï¼Œä½¿ç”¨é»˜è®¤å°ºå¯¸ç»§ç»­\n      console.log('âš ï¸ å®¹å™¨è¢«éšè—ï¼Œä½¿ç”¨é»˜è®¤å°ºå¯¸ç»§ç»­');\n      init2DHeatmap();\n    } else {\n      setTimeout(waitForContainer, 100);\n    }\n  };\n  \n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => {\n      setTimeout(waitForContainer, 100);\n    });\n  } else {\n    setTimeout(waitForContainer, 100);\n  }\n})();\n"]}