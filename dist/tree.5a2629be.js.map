{"version":3,"sources":["tree.js"],"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","return","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_createForOfIteratorHelper","Array","isArray","_unsupportedIterableToArray","_n","F","s","next","_arrayLikeToArray","toString","slice","constructor","name","from","test","DATA_URLS","getSize","svgEl","document","getElementById","panel","parentElement","clientWidth","h","clientHeight","minGrandchildCount","minGrandchildCountClassical","minGrandchildCountElectronic","getThreshold","categoryName","subcategoryName","toLowerCase","includes","buildHierarchy","raw","allowedCategories","filteredData","filter","category","d3","hierarchy","children","map","subcategories","sc","threshold","subcategory","genres","g","Boolean","getTopCategory","strictNames","fuzzyNames","excludeNames","ancestors","_iterator","_step","_loop","ancestor","data","strictMatch","find","k","isExcluded","some","fuzzyMatch","_ret","err","isTopLevelCategory","isHighlightedNode","isStrictMatch","isFuzzyMatch","rByDepth","depth","stretchRadialDistance","root","descendants","forEach","CREAM_BG","categoryDomain","morandiSoft","colorScale","scaleOrdinal","domain","range","normalizeCategoryName","TEXT_COLOR","TEXT_STROKE","LINK_OPACITY","LINK_WIDTH","NODE_OPACITY","showError","message","svg","select","selectAll","remove","_getSize","attr","append","text","lines","split","line","render","_getSize2","radius","Math","min","style","tree","size","PI","links","join","target","linkRadial","angle","x","node","concat","baseFont","midFont","bigFont","offset","clone","lower","zoom","scaleExtent","on","event","transform","zoomIdentity","scale","console","log","loadData","_loadData","_callee","lastError","_iterator2","_step2","_loop2","_ret2","errorMessage","_t2","_t3","_context2","json","Error","window","addEventListener","warn","url","response","contentType","_raw","_t","_context","fetch","method","headers","ok","status","statusText","get","error","substring","_regeneratorValues"],"mappings":"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","file":"tree.5a2629be.js","sourceRoot":"..\\src","sourcesContent":["// tree.js âœ… è½»æ¾è«å…°è¿ªè‰²ç³»ç‰ˆï¼ˆå¥¶æ²¹ç™½èƒŒæ™¯ + ç»¿/ç´«å¯¹è°ƒï¼‰ï¼šæ¸…æ™° + ä¸åˆ å­— + å¯ç¼©æ”¾æ‹–æ‹½\r\n(() => {\r\n  // Parcel å¼€å‘æœåŠ¡å™¨ä¼šå°†æ‰€æœ‰è¯·æ±‚è·¯ç”±åˆ° index.htmlï¼ˆSPA è·¯ç”±ï¼‰\r\n  // è§£å†³æ–¹æ¡ˆï¼šå°è¯•å¤šä¸ªè·¯å¾„ï¼ŒåŒ…æ‹¬ public ç›®å½•ï¼ˆParcel ä¼šç›´æ¥æœåŠ¡ public ç›®å½•çš„æ–‡ä»¶ï¼‰\r\n  // å°è¯•å¤šä¸ªå¯èƒ½çš„æ–‡ä»¶è·¯å¾„\r\n  const DATA_URLS = [\r\n    \"/assets/music_genres_full_with_scraped_info.json\",  // public ç›®å½•ï¼ˆParcel ç›´æ¥æœåŠ¡ï¼‰\r\n    \"./assets/music_genres_full_with_scraped_info.json\",  // ç›¸å¯¹è·¯å¾„\r\n    \"assets/music_genres_full_with_scraped_info.json\",\r\n    \"../assets/music_genres_full_with_scraped_info.json\"\r\n  ];\r\n\r\n  function getSize() {\r\n    const svgEl = document.getElementById(\"tree\");\r\n    const panel = document.getElementById(\"panel-tree\") || svgEl?.parentElement;\r\n    const w = panel?.clientWidth ? panel.clientWidth : 800;\r\n    const h = panel?.clientHeight ? panel.clientHeight : 600;\r\n    return { w, h };\r\n  }\r\n\r\n  // âœ… è¿‡æ»¤é—¨æ§›\r\n  const minGrandchildCount = 5;\r\n  const minGrandchildCountClassical = 1;\r\n  const minGrandchildCountElectronic = 8;\r\n\r\n  function getThreshold(categoryName, subcategoryName) {\r\n    const name = (subcategoryName || categoryName || \"\").toLowerCase();\r\n    if (name.includes(\"electronic\") || name.includes(\"electro\")) return minGrandchildCountElectronic;\r\n    if (categoryName === \"Classical\") return minGrandchildCountClassical;\r\n    return minGrandchildCount;\r\n  }\r\n\r\n  function buildHierarchy(raw) {\r\n    const allowedCategories = [\"Popular\", \"Classical\"];\r\n    const filteredData = raw.filter((d) => allowedCategories.includes(d.category));\r\n\r\n    return d3.hierarchy({\r\n      name: \"Music Genres\",\r\n      children: filteredData.map((d) => ({\r\n        name: d.category,\r\n        children: (d.subcategories || [])\r\n          .map((sc) => {\r\n            const threshold = getThreshold(d.category, sc.subcategory);\r\n            const genres = (sc.genres || [])\r\n              .map((g) => ({ name: g.name, children: g.children || [] }))\r\n              .filter((g) => (g.children || []).length >= threshold);\r\n\r\n            if (genres.length < threshold) return null;\r\n            return { name: sc.subcategory || \"General\", children: genres };\r\n          })\r\n          .filter(Boolean),\r\n      })),\r\n    });\r\n  }\r\n\r\n  function getTopCategory(d) {\r\n    const strictNames = [\"Rock\", \"Classical\", \"Electronic\", \"Popular\"];\r\n    const fuzzyNames = [\"Rap\", \"Jazz\", \"Folk\"];\r\n    const excludeNames = [\"Trap\"];\r\n\r\n    const ancestors = d.ancestors();\r\n    for (const ancestor of ancestors) {\r\n      const name = (ancestor.data.name || \"\").toLowerCase();\r\n\r\n      const strictMatch = strictNames.find((k) => name === k.toLowerCase());\r\n      if (strictMatch) return strictMatch;\r\n\r\n      const isExcluded = excludeNames.some((k) => name.includes(k.toLowerCase()));\r\n      if (isExcluded) continue;\r\n\r\n      const fuzzyMatch = fuzzyNames.find((k) => name.includes(k.toLowerCase()));\r\n      if (fuzzyMatch) return fuzzyMatch;\r\n    }\r\n    return d.data.name;\r\n  }\r\n\r\n  function isTopLevelCategory(d) {\r\n    const name = (d.data.name || \"\").toLowerCase();\r\n    return name === \"popular\" || name === \"classical\";\r\n  }\r\n\r\n  function isHighlightedNode(d) {\r\n    const strictNames = [\"Rock\", \"Classical\", \"Electronic\", \"Popular\"];\r\n    const fuzzyNames = [\"Rap\", \"Jazz\", \"Folk\"];\r\n    const excludeNames = [\"Trap\"];\r\n    const name = (d.data.name || \"\").toLowerCase();\r\n\r\n    const isExcluded = excludeNames.some((k) => name.includes(k.toLowerCase()));\r\n    if (isExcluded) return false;\r\n\r\n    const isStrictMatch = strictNames.some((k) => name === k.toLowerCase());\r\n    const isFuzzyMatch = fuzzyNames.some((k) => name.includes(k.toLowerCase()));\r\n    return isStrictMatch || isFuzzyMatch;\r\n  }\r\n\r\n  // âœ… æ–¹æ¡ˆä¸‰ï¼šæŒ‰å±‚çº§å›ºå®šåœ†ç‚¹åŠå¾„ï¼ˆæ›´æ¸…æ™°ï¼‰\r\n  function rByDepth(d) {\r\n    if (d.depth === 0) return 0;\r\n    if (d.depth === 1) return 14;\r\n    if (d.depth === 2) return 9;\r\n    if (d.depth === 3) return 6;\r\n    return 4;\r\n  }\r\n\r\n  function stretchRadialDistance(root) {\r\n    root.descendants().forEach((d) => {\r\n      if (d.depth === 0) d.y = 0;\r\n      else if (d.depth === 1) d.y *= 1.15;\r\n      else if (d.depth === 2) d.y *= 1.45;\r\n      else if (d.depth === 3) d.y *= 1.85;\r\n      else d.y *= 2.25;\r\n    });\r\n  }\r\n\r\n  // âœ… ä½ è¦çš„ï¼šèƒŒæ™¯æ›´â€œå¥¶æ²¹ç™½â€\r\n  const CREAM_BG = \"#FAF9F6\";\r\n\r\n  // âœ… è½»æ¾è«å…°è¿ª + â€œç»¿/ç´«å¯¹è°ƒâ€\r\n  // åŸæœ¬ï¼šElectronic=ç»¿ï¼ŒClassical=ç´«\r\n  // ç°åœ¨ï¼šElectronic=ç´«ï¼ŒClassical=ç»¿ï¼ˆæ›´ç¬¦åˆä½ åçˆ±ç´«è‰²ï¼‰\r\n  const categoryDomain = [\"Popular\", \"Rock\", \"Electronic\", \"Classical\", \"Jazz\", \"Folk\", \"Rap\", \"Other\"];\r\n  const morandiSoft = [\r\n    \"#6E8FB2\", // Popularï¼šç°è“\r\n   \"#d39bacff\", // Rockï¼šè±†æ²™çº¢\r\n    \"#B7A6C9\", // Electronicï¼šé›¾ç´« âœ…ï¼ˆåŸæ¥çš„ Classicalï¼‰\r\n    \"#8FB6A3\", // Classicalï¼šé¼ å°¾è‰ç»¿ âœ…ï¼ˆåŸæ¥çš„ Electronicï¼‰\r\n    \"#D2A86D\", // Jazzï¼šå¥¶æé‡‘\r\n    \"#A9B8A6\", // Folkï¼šç°æ©„æ¦„\r\n    \"#7FA1B6\", // Rapï¼šè“ç°\r\n    \"#B8B1A8\", // Otherï¼šç°è¤\r\n  ];\r\n  const colorScale = d3.scaleOrdinal().domain(categoryDomain).range(morandiSoft);\r\n\r\n  function normalizeCategoryName(name) {\r\n    const n = (name || \"\").toLowerCase();\r\n    if (n.includes(\"popular\")) return \"Popular\";\r\n    if (n.includes(\"rock\")) return \"Rock\";\r\n    if (n.includes(\"electronic\") || n.includes(\"electro\")) return \"Electronic\";\r\n    if (n.includes(\"classical\")) return \"Classical\";\r\n    if (n.includes(\"jazz\")) return \"Jazz\";\r\n    if (n.includes(\"folk\")) return \"Folk\";\r\n    if (n.includes(\"rap\") || n.includes(\"hip hop\") || n.includes(\"hiphop\")) return \"Rap\";\r\n    return \"Other\";\r\n  }\r\n\r\n  const TEXT_COLOR = \"#2F3A45\";\r\n  const TEXT_STROKE = \"rgba(255,255,255,0.85)\";\r\n  const LINK_OPACITY = 0.32;\r\n  const LINK_WIDTH = 1.6;\r\n  const NODE_OPACITY = 0.92;\r\n\r\n  function showError(message) {\r\n    const svg = d3.select(\"#tree\");\r\n    svg.selectAll(\"*\").remove();\r\n    \r\n    const { w, h } = getSize();\r\n    svg.attr(\"viewBox\", [-w / 2, -h / 2, w, h]);\r\n    \r\n    // èƒŒæ™¯\r\n    svg.append(\"rect\")\r\n      .attr(\"x\", -w / 2)\r\n      .attr(\"y\", -h / 2)\r\n      .attr(\"width\", w)\r\n      .attr(\"height\", h)\r\n      .attr(\"fill\", CREAM_BG);\r\n    \r\n    // é”™è¯¯æ–‡æœ¬ç»„\r\n    const g = svg.append(\"g\");\r\n    \r\n    g.append(\"text\")\r\n      .attr(\"text-anchor\", \"middle\")\r\n      .attr(\"x\", 0)\r\n      .attr(\"y\", -30)\r\n      .attr(\"font-size\", 20)\r\n      .attr(\"font-weight\", \"bold\")\r\n      .attr(\"fill\", \"#d62728\")\r\n      .text(\"âŒ æ•°æ®åŠ è½½å¤±è´¥\");\r\n    \r\n    // é”™è¯¯ä¿¡æ¯ï¼ˆæ”¯æŒå¤šè¡Œï¼‰\r\n    const lines = message.split('\\n');\r\n    lines.forEach((line, i) => {\r\n      g.append(\"text\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"x\", 0)\r\n        .attr(\"y\", i * 20)\r\n        .attr(\"font-size\", 14)\r\n        .attr(\"fill\", \"#666\")\r\n        .text(line);\r\n    });\r\n    \r\n    g.append(\"text\")\r\n      .attr(\"text-anchor\", \"middle\")\r\n      .attr(\"x\", 0)\r\n      .attr(\"y\", lines.length * 20 + 20)\r\n      .attr(\"font-size\", 12)\r\n      .attr(\"fill\", \"#888\")\r\n      .text(\"è¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„å’Œç½‘ç»œè¿æ¥\");\r\n  }\r\n\r\n  function render(raw) {\r\n    const { w, h } = getSize();\r\n    const radius = Math.min(w, h) / 2;\r\n\r\n    const svg = d3.select(\"#tree\");\r\n    svg.selectAll(\"*\").remove();\r\n\r\n    svg\r\n      .attr(\"viewBox\", [-w / 2, -h / 2, w, h])\r\n      .style(\"font\", \"11px sans-serif\")\r\n      .style(\"cursor\", \"grab\");\r\n\r\n    // âœ… èƒŒæ™¯çŸ©å½¢ï¼ˆä¸è·Ÿéš zoom ç¼©æ”¾ï¼‰\r\n    svg.append(\"rect\")\r\n      .attr(\"x\", -w / 2)\r\n      .attr(\"y\", -h / 2)\r\n      .attr(\"width\", w)\r\n      .attr(\"height\", h)\r\n      .attr(\"fill\", CREAM_BG);\r\n\r\n    // âœ… ç”»å¸ƒ gï¼ˆzoom/pan åªä½œç”¨åœ¨è¿™ä¸ª gï¼‰\r\n    const g = svg.append(\"g\");\r\n\r\n    const root = buildHierarchy(raw);\r\n    if (!root.children || root.children.length === 0) {\r\n      svg.append(\"text\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"font-size\", 18)\r\n        .attr(\"fill\", \"#666\")\r\n        .text(\"Tree: no data after filtering\");\r\n      return;\r\n    }\r\n\r\n    const tree = d3.tree().size([2 * Math.PI, radius - 60]);\r\n    tree(root);\r\n    stretchRadialDistance(root);\r\n\r\n    // âœ… è¿çº¿\r\n    g.append(\"g\")\r\n      .attr(\"fill\", \"none\")\r\n      .attr(\"stroke-opacity\", LINK_OPACITY)\r\n      .attr(\"stroke-width\", LINK_WIDTH)\r\n      .selectAll(\"path\")\r\n      .data(root.links())\r\n      .join(\"path\")\r\n      .attr(\"stroke\", (d) => colorScale(normalizeCategoryName(getTopCategory(d.target))))\r\n      .attr(\"d\", d3.linkRadial().angle((d) => d.x).radius((d) => d.y));\r\n\r\n    // âœ… èŠ‚ç‚¹\r\n    const node = g.append(\"g\")\r\n      .selectAll(\"g\")\r\n      .data(root.descendants())\r\n      .join(\"g\")\r\n      .attr(\"transform\", (d) => `\r\n        rotate(${(d.x * 180) / Math.PI - 90})\r\n        translate(${d.y},0)\r\n      `);\r\n\r\n    node.append(\"circle\")\r\n      .attr(\"r\", rByDepth)\r\n      .attr(\"fill\", (d) => colorScale(normalizeCategoryName(getTopCategory(d))))\r\n      .attr(\"fill-opacity\", NODE_OPACITY)\r\n      .attr(\"stroke\", \"rgba(255,255,255,0.95)\")\r\n      .attr(\"stroke-width\", 1);\r\n\r\n    // âœ… æ–‡å­—ï¼ˆä¸åˆ å­—ï¼‰\r\n    const baseFont = 8;\r\n    const midFont = 11;\r\n    const bigFont = 16;\r\n\r\n    node.append(\"text\")\r\n      .attr(\"dy\", \"0.31em\")\r\n      .attr(\"x\", (d) => {\r\n        const offset = 10 + d.depth * 6;\r\n        return d.x < Math.PI === !d.children ? offset : -offset;\r\n      })\r\n      .attr(\"text-anchor\", (d) =>\r\n        d.x < Math.PI === !d.children ? \"start\" : \"end\"\r\n      )\r\n      .attr(\"transform\", (d) =>\r\n        d.x >= Math.PI ? \"rotate(180)\" : null\r\n      )\r\n      .attr(\"font-size\", (d) => {\r\n        if (isTopLevelCategory(d)) return `${bigFont}px`;\r\n        if (isHighlightedNode(d)) return `${midFont}px`;\r\n        return `${baseFont}px`;\r\n      })\r\n      .attr(\"font-weight\", (d) =>\r\n        isTopLevelCategory(d) ? \"750\" : (isHighlightedNode(d) ? \"650\" : \"450\")\r\n      )\r\n      .attr(\"fill\", TEXT_COLOR)\r\n      .text((d) => (d.depth === 0 ? \"\" : d.data.name))\r\n      .clone(true)\r\n      .lower()\r\n      .attr(\"stroke\", TEXT_STROKE)\r\n      .attr(\"stroke-width\", 0.8);\r\n\r\n    // âœ… ç¼©æ”¾ + æ‹–æ‹½\r\n    const zoom = d3.zoom()\r\n      .scaleExtent([0.45, 7])\r\n      .on(\"start\", () => svg.style(\"cursor\", \"grabbing\"))\r\n      .on(\"end\", () => svg.style(\"cursor\", \"grab\"))\r\n      .on(\"zoom\", (event) => {\r\n        g.attr(\"transform\", event.transform);\r\n      });\r\n\r\n    svg.call(zoom);\r\n    svg.call(zoom.transform, d3.zoomIdentity.scale(0.95));\r\n\r\n    console.log(\"âœ… tree ç»˜åˆ¶å®Œæˆï¼ˆå¥¶æ²¹ç™½èƒŒæ™¯ + ç´«è‰²åå¥½ï¼‰\");\r\n  }\r\n\r\n  // å°è¯•åŠ è½½æ•°æ®ï¼Œæ”¯æŒå¤šä¸ªè·¯å¾„\r\n  async function loadData() {\r\n    let lastError = null;\r\n    \r\n    // é¦–å…ˆå°è¯•ä½¿ç”¨ d3.jsonï¼ˆå®ƒå¯èƒ½èƒ½æ›´å¥½åœ°å¤„ç†è·¯å¾„ï¼‰\r\n    try {\r\n      console.log(`ğŸ”„ å°è¯•ä½¿ç”¨ d3.json åŠ è½½: ./assets/music_genres_full_with_scraped_info.json`);\r\n      const raw = await d3.json(\"./assets/music_genres_full_with_scraped_info.json\");\r\n      console.log(\"âœ… tree æ•°æ®åŠ è½½æˆåŠŸ (d3.json)\");\r\n      \r\n      if (!raw || !Array.isArray(raw)) {\r\n        throw new Error(\"æ•°æ®æ ¼å¼é”™è¯¯ï¼šæœŸæœ›æ•°ç»„æ ¼å¼\");\r\n      }\r\n      \r\n      render(raw);\r\n      window.addEventListener(\"resize\", () => render(raw));\r\n      return; // æˆåŠŸåŠ è½½ï¼Œé€€å‡º\r\n    } catch (d3Err) {\r\n      console.warn(`âš ï¸ d3.json åŠ è½½å¤±è´¥:`, d3Err.message);\r\n      lastError = d3Err;\r\n    }\r\n    \r\n    // å¦‚æœ d3.json å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨ fetch å’Œå¤šä¸ªè·¯å¾„\r\n    for (const url of DATA_URLS) {\r\n      try {\r\n        console.log(`ğŸ”„ å°è¯•åŠ è½½æ•°æ®: ${url}`);\r\n        const response = await fetch(url, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Accept': 'application/json'\r\n          }\r\n        });\r\n        \r\n        if (!response.ok) {\r\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n        }\r\n        \r\n        const contentType = response.headers.get(\"content-type\");\r\n        if (!contentType || !contentType.includes(\"application/json\")) {\r\n          // å¦‚æœè¿”å›çš„ä¸æ˜¯ JSONï¼Œå°è¯•è¯»å–æ–‡æœ¬çœ‹çœ‹æ˜¯ä»€ä¹ˆ\r\n          const text = await response.text();\r\n          console.error(\"è¿”å›çš„å†…å®¹ï¼ˆå‰200å­—ç¬¦ï¼‰ï¼š\", text.substring(0, 200));\r\n          throw new Error(`è¿”å›çš„ä¸æ˜¯ JSON æ ¼å¼ï¼Œå¯èƒ½æ˜¯ HTML é”™è¯¯é¡µé¢`);\r\n        }\r\n        \r\n        const raw = await response.json();\r\n        console.log(\"âœ… tree æ•°æ®åŠ è½½æˆåŠŸ:\", url);\r\n        \r\n        if (!raw || !Array.isArray(raw)) {\r\n          throw new Error(\"æ•°æ®æ ¼å¼é”™è¯¯ï¼šæœŸæœ›æ•°ç»„æ ¼å¼\");\r\n        }\r\n        \r\n        render(raw);\r\n        window.addEventListener(\"resize\", () => render(raw));\r\n        return; // æˆåŠŸåŠ è½½ï¼Œé€€å‡º\r\n      } catch (err) {\r\n        console.warn(`âš ï¸ åŠ è½½å¤±è´¥ (${url}):`, err.message);\r\n        lastError = err;\r\n        continue; // å°è¯•ä¸‹ä¸€ä¸ªè·¯å¾„\r\n      }\r\n    }\r\n    \r\n    // æ‰€æœ‰è·¯å¾„éƒ½å¤±è´¥\r\n    console.error(\"âŒ tree æ•°æ®åŠ è½½å¤±è´¥ï¼šæ‰€æœ‰è·¯å¾„éƒ½å°è¯•å¤±è´¥\");\r\n    console.error(\"ğŸ“‹ å°è¯•çš„è·¯å¾„ï¼š\", DATA_URLS);\r\n    console.error(\"ğŸ“‹ æœ€åé”™è¯¯ï¼š\", lastError);\r\n    console.error(\"ğŸ’¡ æç¤ºï¼šParcel å¼€å‘æœåŠ¡å™¨å°†æ‰€æœ‰è¯·æ±‚è·¯ç”±åˆ° index.html\");\r\n    console.error(\"ğŸ’¡ è§£å†³æ–¹æ¡ˆï¼š1) è¿è¡Œ npm run build æ„å»ºé¡¹ç›®ï¼›2) æˆ–å°†æ–‡ä»¶æ”¾åœ¨ public/ ç›®å½•\");\r\n    \r\n    const errorMessage = `æ–‡ä»¶æœªæ‰¾åˆ°: music_genres_full_with_scraped_info.json\\nå·²å°è¯•è·¯å¾„: ${DATA_URLS.join(', ')}\\n\\nParcel å¼€å‘æœåŠ¡å™¨é—®é¢˜ï¼šæ‰€æœ‰è¯·æ±‚è¢«è·¯ç”±åˆ° index.html\\nè§£å†³æ–¹æ¡ˆï¼šè¿è¡Œ npm run build æˆ–ä½¿ç”¨ç”Ÿäº§ç‰ˆæœ¬`;\r\n    showError(errorMessage);\r\n  }\r\n\r\n  // å¼€å§‹åŠ è½½\r\n  loadData();\r\n})();\r\n"]}