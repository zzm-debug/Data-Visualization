{"version":3,"sources":["heatmap-2D.js"],"names":["init2DHeatmap","container","document","getElementById","console","error","containerId","id","d3","select","concat","selectAll","remove","csvData","data","csvParse","trim","genres","months","map","d","heatmapData","flatMap","row","genre","month","value","heatmapContainer","containerWidth","clientWidth","containerHeight","clientHeight","margin","top","Math","max","right","bottom","left","width","height","root","append","attr","svg","x","scaleBand","range","domain","padding","y","axisColor","gridColor","xAxis","call","axisBottom","tickSizeOuter","length","style","yAxis","axisLeft","vMin","min","vMax","morandiCoolWarm","interpolateRgbBasis","colorScale","scaleSequential","interpolator","tooltip","enter","bandwidth","on","event","html","pageX","pageY","defs","glow","feMerge","genreCenter","line","curve","curveMonotoneX","lineData1","lineData2","linePoints1","i","top_genre","count","linePoints2","theme","ink","lineA","lineB","dotFill","drawTrend","points","color","cls","datum","log","window","waitForContainer","offsetWidth","offsetHeight","display","setTimeout","readyState","addEventListener"],"mappings":"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","file":"heatmap-2D.1bc469ae.js","sourceRoot":"..\\src","sourcesContent":["// heatmap-2D.js - 2Dçƒ­åŠ›å›¾\r\n// âœ… Inline CSV data (for heatmap)\r\n(() => {\r\n  // ç­‰å¾…DOMåŠ è½½å®Œæˆ\r\n  const init2DHeatmap = () => {\r\n    // ä½¿ç”¨ heatmap-2d å®¹å™¨\r\n    const container = document.getElementById(\"heatmap-2d\") || document.getElementById(\"heatmap\");\r\n    if (!container) {\r\n      console.error('âŒ æ‰¾ä¸åˆ°heatmapå®¹å™¨');\r\n      return;\r\n    }\r\n    \r\n    // ä½¿ç”¨å®¹å™¨çš„IDè¿›è¡Œé€‰æ‹©\r\n    const containerId = container.id;\r\n    d3.select(`#${containerId}`).selectAll(\"*\").remove();\r\n    d3.select(\"body\").selectAll(\".heatmap-tooltip\").remove();\r\n\r\n    const csvData = `month,classical,electronic,folk,jazz,pop,rock,ACG,rap\r\n2023-12,35,34,64,47,24,32,37,37\r\n2024-01,35,33,58,46,23,31,32,36\r\n2024-02,34,32,62,48,26,33,34,39\r\n2024-03,35,34,59,48,23,34,37,38\r\n2024-04,31,34,55,47,21,34,31,36\r\n2024-05,32,48,57,46,24,34,32,38\r\n2024-06,32,49,62,48,23,36,31,40\r\n2024-07,31,38,64,49,25,32,31,38\r\n2024-08,30,39,62,46,23,32,32,37\r\n2024-09,32,35,60,45,23,36,33,45\r\n2024-10,31,32,60,49,23,33,31,46\r\n2024-11,35,33,58,45,22,32,32,39\r\n2024-12,35,35,63,48,23,33,37,39\r\n2025-01,32,34,54,47,22,32,32,38\r\n2025-02,33,33,58,48,22,31,29,42\r\n2025-03,33,32,56,48,22,31,31,36\r\n2025-04,31,33,59,45,22,31,30,36\r\n2025-05,30,37,58,46,23,32,30,39\r\n2025-06,29,33,57,46,21,32,31,36\r\n2025-07,29,36,60,48,21,39,31,38\r\n2025-08,31,35,59,46,22,34,31,34\r\n2025-09,30,32,61,46,22,33,30,32\r\n2025-10,33,33,59,44,21,34,31,36\r\n2025-11,31,32,57,46,21,33,30,33\r\n2025-12,33,32,60,45,23,32,33,39\r\n`;\r\n\r\n  const data = d3.csvParse(csvData.trim());\r\n\r\n  // âœ… Genre keysï¼ˆä¸Žä½ åŽŸé€»è¾‘ä¸€è‡´ï¼‰\r\n  const genres = [\"ACG\", \"classical\", \"electronic\", \"folk\", \"jazz\", \"pop\", \"rap\", \"rock\"];\r\n  const months = data.map(d => d[\"month\"]);\r\n\r\n  const heatmapData = data.flatMap(row =>\r\n    genres.map(genre => ({\r\n      month: row[\"month\"],\r\n      genre,\r\n      value: +row[genre]\r\n    }))\r\n  );\r\n\r\n  // === è‡ªé€‚åº”å°ºå¯¸è®¡ç®— ===\r\n  // ä½¿ç”¨ä¸Žä¸Šé¢ç›¸åŒçš„å®¹å™¨\r\n  const heatmapContainer = container;\r\n  const containerWidth = heatmapContainer.clientWidth || 900;\r\n  const containerHeight = heatmapContainer.clientHeight || 320;\r\n\r\n  const margin = {\r\n    top: Math.max(22, containerHeight * 0.10),\r\n    right: Math.max(18, containerWidth * 0.03),\r\n    bottom: Math.max(46, containerHeight * 0.18),\r\n    left: Math.max(64, containerWidth * 0.10)\r\n  };\r\n\r\n  const width = containerWidth - margin.left - margin.right;\r\n  const height = containerHeight - margin.top - margin.bottom;\r\n\r\n  const root = d3.select(`#${containerId}`)\r\n    .append(\"svg\")\r\n    .attr(\"width\", \"100%\")\r\n    .attr(\"height\", \"100%\")\r\n    .attr(\"viewBox\", `0 0 ${containerWidth} ${containerHeight}`)\r\n    .attr(\"preserveAspectRatio\", \"xMidYMid meet\");\r\n\r\n  // âœ… èƒŒæ™¯â€œå¡ç‰‡å†…è¡¬â€ï¼ˆæ›´æŸ”å’Œï¼‰\r\n  root.append(\"rect\")\r\n    .attr(\"x\", 10)\r\n    .attr(\"y\", 10)\r\n    .attr(\"width\", containerWidth - 20)\r\n    .attr(\"height\", containerHeight - 20)\r\n    .attr(\"rx\", 14)\r\n    .attr(\"ry\", 14)\r\n    .attr(\"fill\", \"rgba(255,255,255,0.22)\")\r\n    .attr(\"stroke\", \"rgba(36,52,71,0.08)\");\r\n\r\n  const svg = root.append(\"g\")\r\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n  // === Axes ===\r\n  const x = d3.scaleBand().range([0, width]).domain(months).padding(0.08);\r\n  const y = d3.scaleBand().range([height, 0]).domain(genres).padding(0.10);\r\n\r\n  const axisColor = \"rgba(36,52,71,0.55)\";\r\n  const gridColor = \"rgba(36,52,71,0.08)\";\r\n\r\n  const xAxis = svg.append(\"g\")\r\n    .attr(\"transform\", `translate(0, ${height})`)\r\n    .call(d3.axisBottom(x).tickSizeOuter(0));\r\n\r\n  if (months.length > 12 || containerWidth < 560) {\r\n    xAxis.selectAll(\"text\")\r\n      .attr(\"transform\", \"rotate(-45)\")\r\n      .style(\"text-anchor\", \"end\")\r\n      .attr(\"dx\", \"-0.45em\")\r\n      .attr(\"dy\", \"0.55em\");\r\n  }\r\n\r\n  xAxis.selectAll(\"path, line\").attr(\"stroke\", axisColor);\r\n  xAxis.selectAll(\"text\").attr(\"fill\", axisColor).style(\"font-size\", \"11px\");\r\n\r\n  const yAxis = svg.append(\"g\")\r\n    .call(d3.axisLeft(y).tickSizeOuter(0));\r\n\r\n  yAxis.selectAll(\"path, line\").attr(\"stroke\", axisColor);\r\n  yAxis.selectAll(\"text\").attr(\"fill\", axisColor).style(\"font-size\", \"12px\");\r\n\r\n  // === âœ… é¢œè‰²ï¼šå‚è€ƒä½ å›¾äºŒï¼ˆè“ç° â†” å¥¶æ²¹ â†” è±†æ²™ç²‰ï¼‰ï¼Œæ›´æ´»æ³¼ä½†ä¸åˆºçœ¼ ===\r\n  const vMin = d3.min(heatmapData, d => d.value);\r\n  const vMax = d3.max(heatmapData, d => d.value);\r\n\r\n  // â€œMorandi cool-warmâ€ è‡ªå®šä¹‰æ’å€¼\r\n  const morandiCoolWarm = d3.interpolateRgbBasis([\r\n    \"#6E86A6\", // è“ç°\r\n    \"#C9D6E5\", // æµ…é›¾è“\r\n    \"#F7F4EC\", // å¥¶æ²¹\r\n    \"#F1C5B7\", // æµ…è±†æ²™\r\n    \"#C97A6E\"  // æ·±è±†æ²™\r\n  ]);\r\n\r\n  const colorScale = d3.scaleSequential()\r\n    .domain([vMin, vMax])\r\n    .interpolator(morandiCoolWarm);\r\n\r\n  // === Tooltip ===\r\n  const tooltip = d3.select(\"body\").append(\"div\")\r\n    .attr(\"class\", \"heatmap-tooltip\")\r\n    .style(\"position\", \"absolute\")\r\n    .style(\"pointer-events\", \"none\")\r\n    .style(\"opacity\", 0)\r\n    .style(\"padding\", \"10px 12px\")\r\n    .style(\"border-radius\", \"12px\")\r\n    .style(\"background\", \"rgba(30,41,59,0.92)\")\r\n    .style(\"color\", \"#fff\")\r\n    .style(\"font\", '13px/1.35 system-ui,-apple-system,\"Segoe UI\",\"Microsoft YaHei\",sans-serif')\r\n    .style(\"box-shadow\", \"0 10px 24px rgba(0,0,0,0.16)\");\r\n\r\n  // === Heatmap cells ===\r\n  svg.selectAll(\"rect.cell\")\r\n    .data(heatmapData)\r\n    .enter()\r\n    .append(\"rect\")\r\n    .attr(\"class\", \"cell\")\r\n    .attr(\"x\", d => x(d.month))\r\n    .attr(\"y\", d => y(d.genre))\r\n    .attr(\"width\", x.bandwidth())\r\n    .attr(\"height\", y.bandwidth())\r\n    .attr(\"rx\", 8)\r\n    .attr(\"ry\", 8)\r\n    .attr(\"fill\", d => colorScale(d.value))\r\n    .attr(\"stroke\", gridColor)\r\n    .attr(\"stroke-width\", 1)\r\n    .on(\"mousemove\", (event, d) => {\r\n      tooltip\r\n        .style(\"opacity\", 1)\r\n        .html(`<b>${d.genre}</b><br/>${d.month}<br/>Value: ${d.value}`)\r\n        .style(\"left\", `${event.pageX + 12}px`)\r\n        .style(\"top\", `${event.pageY - 18}px`);\r\n    })\r\n    .on(\"mouseout\", () => tooltip.style(\"opacity\", 0));\r\n\r\n  // === âœ… æŠ˜çº¿æ›´æŸ”å’Œï¼šé¢œè‰²ç»Ÿä¸€ã€çº¿æ›´ç»†ã€è½»å¾®å…‰æ™•ï¼Œç‚¹ç”¨â€œç©ºå¿ƒæè¾¹â€é¿å…ç™½ç‚¹çªå…€ ===\r\n  // Glow filter\r\n  const defs = root.append(\"defs\");\r\n  const glow = defs.append(\"filter\").attr(\"id\", \"heatmapGlow\");\r\n  glow.append(\"feGaussianBlur\").attr(\"stdDeviation\", \"1.8\").attr(\"result\", \"coloredBlur\");\r\n  const feMerge = glow.append(\"feMerge\");\r\n  feMerge.append(\"feMergeNode\").attr(\"in\", \"coloredBlur\");\r\n  feMerge.append(\"feMergeNode\").attr(\"in\", \"SourceGraphic\");\r\n\r\n  const genreCenter = d => y(d.genre) + y.bandwidth() / 2;\r\n\r\n  const line = d3.line()\r\n    .x(d => x(d.month) + x.bandwidth() / 2)\r\n    .y(d => genreCenter(d))\r\n    .curve(d3.curveMonotoneX);\r\n\r\n  // æ•°æ®ä¿æŒä½ çš„åŽŸå§‹é€»è¾‘ï¼ˆåªæ˜¯æ¢é¢œè‰²/æ ·å¼ï¼‰\r\n  const lineData1 = [\r\n    {\"part\": 1, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 2, \"top_genre\": \"pop\", \"count\": 8},\r\n    {\"part\": 3, \"top_genre\": \"pop\", \"count\": 7},\r\n    {\"part\": 4, \"top_genre\": \"pop\", \"count\": 8},\r\n    {\"part\": 5, \"top_genre\": \"pop\", \"count\": 8},\r\n    {\"part\": 6, \"top_genre\": \"pop\", \"count\": 8},\r\n    {\"part\": 7, \"top_genre\": \"pop\", \"count\": 8},\r\n    {\"part\": 8, \"top_genre\": \"pop\", \"count\": 8},\r\n    {\"part\": 9, \"top_genre\": \"pop\", \"count\": 8},\r\n    {\"part\": 10, \"top_genre\": \"pop\", \"count\": 7},\r\n    {\"part\": 11, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 12, \"top_genre\": \"pop\", \"count\": 5},\r\n    {\"part\": 13, \"top_genre\": \"pop\", \"count\": 7},\r\n    {\"part\": 14, \"top_genre\": \"pop\", \"count\": 7},\r\n    {\"part\": 15, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 16, \"top_genre\": \"pop\", \"count\": 7},\r\n    {\"part\": 17, \"top_genre\": \"pop\", \"count\": 5},\r\n    {\"part\": 18, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 19, \"top_genre\": \"pop\", \"count\": 8},\r\n    {\"part\": 20, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 21, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 22, \"top_genre\": \"pop\", \"count\": 7},\r\n    {\"part\": 23, \"top_genre\": \"pop\", \"count\": 5},\r\n    {\"part\": 24, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 25, \"top_genre\": \"pop\", \"count\": 6}\r\n  ];\r\n\r\n  const lineData2 = [\r\n    {\"part\": 1, \"top_genre\": \"rap\", \"count\": 5},\r\n    {\"part\": 2, \"top_genre\": \"rap\", \"count\": 6},\r\n    {\"part\": 3, \"top_genre\": \"rap\", \"count\": 7},\r\n    {\"part\": 4, \"top_genre\": \"rap\", \"count\": 6},\r\n    {\"part\": 5, \"top_genre\": \"rap\", \"count\": 7},\r\n    {\"part\": 6, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 7, \"top_genre\": \"pop\", \"count\": 8},\r\n    {\"part\": 8, \"top_genre\": \"pop\", \"count\": 7},\r\n    {\"part\": 9, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 10, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 11, \"top_genre\": \"pop\", \"count\": 5},\r\n    {\"part\": 12, \"top_genre\": \"pop\", \"count\": 5},\r\n    {\"part\": 13, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 14, \"top_genre\": \"pop\", \"count\": 7},\r\n    {\"part\": 15, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 16, \"top_genre\": \"pop\", \"count\": 7},\r\n    {\"part\": 17, \"top_genre\": \"pop\", \"count\": 5},\r\n    {\"part\": 18, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 19, \"top_genre\": \"pop\", \"count\": 7},\r\n    {\"part\": 20, \"top_genre\": \"pop\", \"count\": 7},\r\n    {\"part\": 21, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 22, \"top_genre\": \"pop\", \"count\": 7},\r\n    {\"part\": 23, \"top_genre\": \"pop\", \"count\": 6},\r\n    {\"part\": 24, \"top_genre\": \"pop\", \"count\": 5},\r\n    {\"part\": 25, \"top_genre\": \"pop\", \"count\": 5}\r\n  ];\r\n\r\n  const linePoints1 = lineData1.map((d, i) => ({ month: months[i], genre: d.top_genre, count: +d.count }));\r\n  const linePoints2 = lineData2.map((d, i) => ({ month: months[i], genre: d.top_genre, count: +d.count }));\r\n\r\n  const theme = {\r\n    ink: \"rgba(36,52,71,0.70)\",\r\n    // å‚è€ƒå›¾äºŒï¼šè“ç° + è±†æ²™ï¼ˆæ›´ç»Ÿä¸€ï¼‰\r\n    lineA: \"#5B7AA6\",\r\n    lineB: \"#C97A6E\",\r\n    dotFill: \"#F7F4EC\"\r\n  };\r\n\r\n  function drawTrend(points, color, cls) {\r\n    svg.append(\"path\")\r\n      .datum(points)\r\n      .attr(\"class\", cls)\r\n      .attr(\"fill\", \"none\")\r\n      .attr(\"stroke\", color)\r\n      .attr(\"stroke-width\", 2.2)\r\n      .attr(\"stroke-linejoin\", \"round\")\r\n      .attr(\"stroke-linecap\", \"round\")\r\n      .attr(\"opacity\", 0.95)\r\n      .attr(\"filter\", \"url(#heatmapGlow)\")\r\n      .attr(\"d\", line);\r\n\r\n    svg.selectAll(`circle.${cls}-pt`)\r\n      .data(points)\r\n      .enter()\r\n      .append(\"circle\")\r\n      .attr(\"class\", `${cls}-pt`)\r\n      .attr(\"cx\", d => x(d.month) + x.bandwidth() / 2)\r\n      .attr(\"cy\", d => genreCenter(d))\r\n      .attr(\"r\", d => 3.2 + d.count / 6)   // æ›´å…‹åˆ¶\r\n      .attr(\"fill\", theme.dotFill)         // ç©ºå¿ƒæ•ˆæžœæ›´å¹²å‡€\r\n      .attr(\"stroke\", color)\r\n      .attr(\"stroke-width\", 2)\r\n      .attr(\"opacity\", 0.95)\r\n      .on(\"mousemove\", (event, d) => {\r\n        tooltip\r\n          .style(\"opacity\", 1)\r\n          .html(`ðŸŽµ Genre: <b>${d.genre}</b><br/>${d.month}<br/>Count: ${d.count}`)\r\n          .style(\"left\", `${event.pageX + 12}px`)\r\n          .style(\"top\", `${event.pageY - 18}px`);\r\n      })\r\n      .on(\"mouseout\", () => tooltip.style(\"opacity\", 0));\r\n  }\r\n\r\n    drawTrend(linePoints1, theme.lineA, \"trendA\");\r\n    drawTrend(linePoints2, theme.lineB, \"trendB\");\r\n\r\n    console.log(\"âœ… 2D Heatmap rendered (Morandi cool-warm + softer trends)\");\r\n  };\r\n  \r\n  // å¯¼å‡ºåˆå§‹åŒ–å‡½æ•°ï¼Œå…è®¸å¤–éƒ¨è°ƒç”¨\r\n  window.init2DHeatmap = init2DHeatmap;\r\n  \r\n  // ç­‰å¾…å®¹å™¨æœ‰å°ºå¯¸åŽå†æ‰§è¡Œ\r\n  // ç®€åŒ–ï¼šå¦‚æžœå®¹å™¨è¢«éšè—ï¼Œä½¿ç”¨é»˜è®¤å°ºå¯¸ç»§ç»­\r\n  const waitForContainer = () => {\r\n    const container = document.getElementById(\"heatmap-2d\") || document.getElementById(\"heatmap\");\r\n    if (!container) {\r\n      console.error('âŒ æ‰¾ä¸åˆ°heatmapå®¹å™¨');\r\n      return;\r\n    }\r\n    \r\n    const width = container.offsetWidth || container.clientWidth;\r\n    const height = container.offsetHeight || container.clientHeight;\r\n    \r\n    // å¦‚æžœå®¹å™¨æœ‰å°ºå¯¸ï¼Œæˆ–è€…å®¹å™¨è¢«éšè—ï¼ˆä½¿ç”¨é»˜è®¤å°ºå¯¸ï¼‰\r\n    if (width > 0 && height > 0) {\r\n      init2DHeatmap();\r\n    } else if (container.style.display === 'none') {\r\n      // å¦‚æžœå®¹å™¨è¢«éšè—ï¼Œä½¿ç”¨é»˜è®¤å°ºå¯¸ç»§ç»­\r\n      console.log('âš ï¸ å®¹å™¨è¢«éšè—ï¼Œä½¿ç”¨é»˜è®¤å°ºå¯¸ç»§ç»­');\r\n      init2DHeatmap();\r\n    } else {\r\n      setTimeout(waitForContainer, 100);\r\n    }\r\n  };\r\n  \r\n  if (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n      setTimeout(waitForContainer, 100);\r\n    });\r\n  } else {\r\n    setTimeout(waitForContainer, 100);\r\n  }\r\n})();\r\n"]}